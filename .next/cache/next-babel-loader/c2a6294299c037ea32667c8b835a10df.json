{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n\nvar _this = this;\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport GrapesJS from 'grapesjs';\nimport Head from 'next/head';\nimport { useEffect, useState } from 'react';\nimport basic from './Grape/Blocks/Basic/index';\nexport default (function (_ref) {\n  var _ref$id = _ref.id,\n      id = _ref$id === void 0 ? 'grapesjs-react-editor' : _ref$id,\n      _ref$components = _ref.components,\n      components = _ref$components === void 0 ? [] : _ref$components,\n      _ref$blocks = _ref.blocks,\n      blocks = _ref$blocks === void 0 ? [] : _ref$blocks,\n      _ref$plugins = _ref.plugins,\n      plugins = _ref$plugins === void 0 ? [] : _ref$plugins,\n      blockManager = _ref.blockManager,\n      storageManager = _ref.storageManager;\n\n  var _useState = useState(null),\n      editor = _useState[0],\n      setEditor = _useState[1];\n\n  useEffect(function () {\n    if (!editor) {\n      var e = GrapesJS.init({\n        blockManager: blockManager,\n        storageManager: storageManager,\n        container: \"#\".concat(id),\n        fromElement: false,\n        plugins: [basic].concat(_toConsumableArray(plugins))\n      });\n      console.log(e.Panels.removePanel('views-container'));\n      e.Panels.addPanel({\n        id: 'myNewPanel',\n        visible: true\n      });\n      e.Panels.addButton('myNewPanel', {\n        id: 'myNewButton',\n        className: 'someClass',\n        command: 'someCommand',\n        attributes: {\n          title: 'Some title'\n        },\n        active: false\n      });\n      var defaultType = e.DomComponents.getType('default');\n      var defaultModel = defaultType.model;\n      var defaultView = defaultType.view;\n      components.forEach(function (component) {\n        e.DomComponents.addType(component.type, {\n          model: defaultModel.extend({\n            defaults: _Object$assign({}, defaultModel.prototype.defaults)\n          }, {\n            isComponent: component.isComponent.bind(_this)\n          }),\n          view: defaultView.extend({\n            events: _objectSpread({}, component.events),\n            render: component.render.bind(_this)\n          })\n        });\n      });\n      blocks.forEach(function (block) {\n        e.BlockManager.add(block.id, block);\n      });\n      setEditor(e);\n    } else {\n      if (document) {\n        document.getElementById(id).append(editor.render());\n      }\n    }\n\n    return function cleanup() {\n      if (editor) {\n        editor.destroy();\n        GrapesJS.editors = GrapesJS.editors.filter(function (e) {\n          return e !== editor;\n        });\n      }\n    };\n  }, []);\n  return __jsx(\"div\", {\n    id: id\n  }, __jsx(Head, null, __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"/static/grapesjs/css/grapes.min.css\"\n  })));\n});","map":{"version":3,"sources":["/Users/riz/Documents/rsys/components/Grape.tsx"],"names":["GrapesJS","Head","useEffect","useState","basic","id","components","blocks","plugins","blockManager","storageManager","editor","setEditor","e","init","container","fromElement","console","log","Panels","removePanel","addPanel","visible","addButton","className","command","attributes","title","active","defaultType","DomComponents","getType","defaultModel","model","defaultView","view","forEach","component","addType","type","extend","defaults","prototype","isComponent","bind","events","render","block","BlockManager","add","document","getElementById","append","cleanup","destroy","editors","filter"],"mappings":"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","sourcesContent":["import GrapesJS from 'grapesjs';\nimport Head from 'next/head';\nimport { useEffect, useState } from 'react';\nimport basic from './Grape/Blocks/Basic/index';\n\nexport default ({\n  id = 'grapesjs-react-editor',\n  components = [],\n  blocks = [],\n  plugins = [],\n  blockManager,\n  storageManager\n}: any) => {\n  const [editor, setEditor] = useState(null);\n\n  useEffect(() => {\n    if (!editor) {\n      const e = GrapesJS.init({\n        blockManager,\n        storageManager,\n        container: `#${id}`,\n        fromElement: false,\n        plugins: [basic, ...plugins]\n      });\n\n      console.log(e.Panels.removePanel('views-container'));\n      e.Panels.addPanel({\n        id: 'myNewPanel',\n        visible: true\n      });\n      e.Panels.addButton('myNewPanel', {\n        id: 'myNewButton',\n        className: 'someClass',\n        command: 'someCommand',\n        attributes: { title: 'Some title' },\n        active: false\n      });\n\n      const defaultType = e.DomComponents.getType('default');\n      const defaultModel = defaultType.model;\n      const defaultView = defaultType.view;\n      components.forEach((component: any) => {\n        e.DomComponents.addType(component.type, {\n          model: defaultModel.extend(\n            {\n              defaults: Object.assign({}, defaultModel.prototype.defaults)\n            },\n            {\n              isComponent: component.isComponent.bind(this)\n            }\n          ),\n          view: defaultView.extend({\n            events: {\n              ...component.events\n            },\n            render: component.render.bind(this)\n          })\n        });\n      });\n      blocks.forEach((block: any) => {\n        e.BlockManager.add(block.id, block);\n      });\n      setEditor(e);\n    } else {\n      if (document) {\n        document.getElementById(id).append(editor.render());\n      }\n    }\n\n    return function cleanup() {\n      if (editor) {\n        editor.destroy();\n        GrapesJS.editors = GrapesJS.editors.filter(e => e !== editor);\n      }\n    };\n  }, []);\n\n  return (\n    <div id={id}>\n      <Head>\n        <link rel='stylesheet' href='/static/grapesjs/css/grapes.min.css' />\n      </Head>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}