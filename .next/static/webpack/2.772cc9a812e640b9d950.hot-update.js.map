{"version":3,"file":"static/webpack/2.772cc9a812e640b9d950.hot-update.js","sources":["webpack:///./components/Grape.tsx"],"sourcesContent":["import GrapesJS from 'grapesjs';\nimport gjsBasicBlocks from 'grapesjs-blocks-basic';\nimport Head from 'next/head';\nimport { useEffect, useState } from 'react';\nimport { GrapesPluginType, IStorageManager, IStyleManager } from './GrapeType';\n\ninterface IProps {\n  id: string;\n  // Preset and plugin options\n  plugins: GrapesPluginType[];\n  // Components\n  components: any[];\n  blocks: any[];\n  // Editor configurations\n  storageManager: IStorageManager;\n  blockManager: {};\n  styleManager: IStyleManager;\n}\nexport default ({\n  id = 'grapesjs-react-editor',\n  components = [],\n  blocks = [],\n  plugins = [],\n  blockManager,\n  storageManager\n}: any) => {\n  const [editor, setEditor] = useState(null);\n\n  useEffect(() => {\n    if (!editor) {\n      const e = GrapesJS.init({\n        blockManager,\n        storageManager,\n        container: `#${id}`,\n        fromElement: true,\n        plugins: [...plugins, gjsBasicBlocks]\n      });\n\n      const defaultType = e.DomComponents.getType('default');\n      const defaultModel = defaultType.model;\n      const defaultView = defaultType.view;\n      components.forEach((component: any) => {\n        e.DomComponents.addType(component.type, {\n          model: defaultModel.extend(\n            {\n              defaults: Object.assign({}, defaultModel.prototype.defaults)\n            },\n            {\n              isComponent: component.isComponent.bind(this)\n            }\n          ),\n          view: defaultView.extend({\n            events: {\n              ...component.events\n            },\n            render: component.render.bind(this)\n          })\n        });\n      });\n      blocks.forEach((block: any) => {\n        e.BlockManager.add(block.id, block);\n      });\n      setEditor(e);\n    } else {\n      if (document) {\n        document.getElementById(id).append(editor.render());\n      }\n    }\n\n    return function cleanup() {\n      if (editor) {\n        editor.destroy();\n        GrapesJS.editors = GrapesJS.editors.filter(e => e !== editor);\n      }\n    };\n  }, []);\n\n  return (\n    <div id={id}>\n      <Head>\n        <link rel='stylesheet' href='/static/grapesjs/css/grapes.min.css' />\n      </Head>\n    </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAeA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AAIA;AADA;AAIA;AACA;AAGA;AAJA;AATA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AAAA;AAAA;AAIA;;;;A","sourceRoot":""}